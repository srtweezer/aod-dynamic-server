syntax = "proto3";

package aod;

// ============================================================================
// Ping Command
// ============================================================================

// Request to ping the server (health check)
message PingRequest {
  // Empty for now - could add client timestamp later
}

// Response from ping command
message PingResponse {
  // Server timestamp in nanoseconds since epoch
  int64 timestamp_ns = 1;
}

// ============================================================================
// Initialize Command
// ============================================================================

// Initialize AWG hardware with channel amplitudes
message InitializeRequest {
  // Amplitude for each active channel in millivolts
  // Array size must match number of active channels in AWG_CHANNEL_MASK
  // Example: if mask = 0b0011 (channels 0,1), provide 2 amplitudes
  repeated int32 channel_amplitudes_mv = 1;
}

// Response from initialize command
message InitializeResponse {
  bool success = 1;
  string error_message = 2;
}

// ============================================================================
// Stop Command
// ============================================================================

// Stop AWG output and DMA
message StopRequest {
  // Empty - no parameters required
}

// Response from stop command
message StopResponse {
  bool success = 1;
  string error_message = 2;
}

// ============================================================================
// Top-Level Request/Response Wrappers
// ============================================================================

// Client sends Request messages to server
message Request {
  oneof command {
    PingRequest ping = 1;
    InitializeRequest initialize = 2;
    StopRequest stop = 3;
    // Future commands will be added here:
    // GenerateWaveformRequest generate_waveform = 4;
    // StartRequest start = 5;
    // etc.
  }
}

// Server sends Response messages back to client
message Response {
  oneof result {
    PingResponse ping = 1;
    InitializeResponse initialize = 2;
    StopResponse stop = 3;
    // Future responses will be added here:
    // GenerateWaveformResponse generate_waveform = 4;
    // ErrorResponse error = 5;
    // etc.
  }
}
